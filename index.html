<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Papiers Peints - Elegance Italian Interior Design</title>
  <link rel="stylesheet" href="styles.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400&family=Inter:wght@300;400&display=swap" rel="stylesheet">
</head>
<body>
<div id="ew">

  <!-- HERO -->
  <section class="hero">
    <div class="overlay"></div>
  </section>

  <!-- Collections -->
  <section class="section">
    <div class="container">
      <h1 style="text-align:center;">Nos Collections</h1>
      <div class="grid">
        <a href="prestige.html" class="card">
          <img src="https://static.wixstatic.com/media/d77542_fe3d4bf7270746ca91adab75028f8e96~mv2.png" alt="Prestige">
          <h3>Prestige</h3>
        </a>
        <a href="collection-3d.html" class="card">
          <img src="https://static.wixstatic.com/media/d77542_50d7633186c141a79a57e2549d69c278~mv2.png" alt="3D">
          <h3>3D</h3>
        </a>
        <a href="gold.html" class="card">
          <img src="https://static.wixstatic.com/media/d77542_74d9f4d77e5a44819123f2b70d71030b~mv2.png" alt="Gold">
          <h3>Gold</h3>
        </a>
      </div>
    </div>
  </section>

  <!-- CONFIGURATEUR 3D -->
  <section class="config">
    <div class="container">
      <h2 style="text-align:center;">Configurateur personnalisé</h2>
      <p class="muted" style="text-align:center;">Importez votre motif et visualisez-le directement sur un mur 3D.</p>
      <div class="wrap">
        <div class="panel">
          <label for="fileInput">Image du motif</label>
          <input id="fileInput" type="file" accept="image/*"/>

          <label for="scale">Échelle</label>
          <input type="range" id="scale" min="0.5" max="3" step="0.1" value="1"/>

          <label for="rotation">Rotation</label>
          <input type="range" id="rotation" min="0" max="360" step="1" value="0"/>
        </div>
        <div class="stage3d" id="stage3d"></div>
      </div>
    </div>
  </section>

</div>

<!-- Three.js -->
<script type="module">
  import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js';
  import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/controls/OrbitControls.js';

  const container = document.getElementById('stage3d');
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0xf8f8f6);

  const camera = new THREE.PerspectiveCamera(45, container.clientWidth/container.clientHeight, 0.1, 100);
  camera.position.set(0,1.5,4);

  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);

  const controls = new OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.target.set(0,1.3,0);

  // Lights
  scene.add(new THREE.HemisphereLight(0xffffff,0x888888,0.8));
  const dir = new THREE.DirectionalLight(0xffffff,0.6);
  dir.position.set(2,4,3);
  scene.add(dir);

  // Floor + wall
  const floor = new THREE.Mesh(new THREE.PlaneGeometry(8,6), new THREE.MeshStandardMaterial({color:0xdddddd}));
  floor.rotation.x = -Math.PI/2; scene.add(floor);

  const wallMat = new THREE.MeshStandardMaterial({color:0xffffff});
  const wall = new THREE.Mesh(new THREE.PlaneGeometry(4,2.5), wallMat);
  wall.position.set(0,1.25,-2); scene.add(wall);

  const loader = new THREE.TextureLoader(); let motifTex=null;
  document.getElementById('fileInput').addEventListener('change', e=>{
    const f=e.target.files[0]; if(!f) return;
    const url = URL.createObjectURL(f);
    loader.load(url, tex=>{
      tex.wrapS=tex.wrapT=THREE.RepeatWrapping;
      motifTex=tex; wall.material.map=motifTex; wall.material.needsUpdate=true;
    });
  });

  document.getElementById('scale').addEventListener('input', e=>{
    if(motifTex){ motifTex.repeat.set(+e.target.value, +e.target.value); motifTex.needsUpdate=true; }
  });
  document.getElementById('rotation').addEventListener('input', e=>{
    if(motifTex){ motifTex.rotation=THREE.MathUtils.degToRad(+e.target.value); motifTex.needsUpdate=true; }
  });

  function animate(){ requestAnimationFrame(animate); controls.update(); renderer.render(scene,camera); }
  animate();
</script>
</body>
</html>
